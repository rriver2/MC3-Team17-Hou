# workflow ì˜ ì´ë¦„
name: test-every-push

on:
  # dev ë¸Œëœì¹˜ì— pushë‚˜ pull request ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ì„ë•Œ workflowë¥¼ ë™ì‘í•˜ê²Œ í•˜ëŠ” trigger
  push:
    branches: [ dev ]
  pull_request:
    branches: [ dev ]

# jobì€ ì‚¬ìš©ìê°€ ì •í•œ í”Œë«í¼ì„ í†µí•´ stepì´ë¼ëŠ” ì¼ë ¨ì˜ ê³¼ì •ì„ ì‹¤í–‰í•¨
# ì—¬ëŸ¬ ê°œì˜ jobì„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì—¬ëŸ¬ ê°œì˜ jobì„ ì‚¬ìš©í•  ë•ŒëŠ” ì„œë¡œ ì •ë³´ë„ êµí™˜í•  ìˆ˜ ìˆìŒ ( ê°ê° ë…ë¦½ì ìœ¼ë¡œë„ ì‹¤í–‰ ê°€ëŠ¥ )
# ì´ë²ˆ í”Œì ì—ì„œì˜ workflowëŠ” ê°„ë‹¨í•´ì„œ "build"ë¼ëŠ” í•˜ë‚˜ì˜ jobë§Œ ê°€ì§
jobs:
  build:
    # jobì´ ì‹¤í–‰ë  í™˜ê²½ - ìµœì‹  mac os
    runs-on: macos-latest
    strategy:
     matrix:
        destination: ['platform=iOS Simulator,OS=15.2,name=iPhone 13']
    # Stepì€ jobì˜ ì¼ë¶€ë¡œ ì‹¤í–‰ë  ì¼ë ¨ì˜ taskë“¤ì„ ë‚˜íƒ€ëƒ„
    steps:
    # uses í‚¤ì›Œë“œë¥¼ í†µí•´ Github Actionsì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì„ ì‚¬ìš© ê°€ëŠ¥. ì•„ë˜ ì•¡ì…˜ì€ repository ì— ì²´í¬ì•„ì›ƒí•˜ëŠ” ê²ƒ
    - uses: actions/checkout@v2
    # shell ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ command ìˆ˜í–‰
    # name: ì‹¤í–‰í•  ì‘ì—…ì˜ ì´ë¦„
    # run: ìŠ¤ìœ„í”„íŠ¸ ì»´íŒŒì¼ëŸ¬ë¡œ ë¹Œë“œí•˜ëŠ” ëª…ë ¹ì–´
    - name: Start xcode build ğŸ› 
      run: |
        xcodebuild build -project Ninano/Ninano.xcodeproj -scheme Ninano -destination "${destination}"
      env:
        destination: ${{ matrix.destination }}
